
# ORM模型

>简单的说ORM就是数据库的表和简单Java对象的映射关系模型，主要解决数据库数据和POJO对象的相互映射。

## 基于ORM的Hibernate
>Hibernate是建立在若干POJO通过XML映射文件提供的规则映射到数据库表上的。换句话说我们可以通过POJO直接操作数据库的数据。

## 代码示例

```
- 配置文件
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.how2java.pojo">
	<class name="Product" table="product_">
		<id name="id" column="id">
			<generator class="native">
			</generator>
		</id>
		<property name="name" />
		<property name="price" />
	</class>

- 静态全局类
public final class HibernateUtil {
    private static SessionFactory sessionFactory = null;
    private HibernateUtil() {
        // TODO Auto-generated constructor stub
    }
    static {
        Configuration cfg = new Configuration();
        cfg.configure();
        sessionFactory = cfg.buildSessionFactory();
    }
    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
    public static Session getSession() {
        return sessionFactory.openSession();        
    }
}


- 操作实例
 @Override
    public void savaUser(User user) {
        // TODO Auto-generated method stub
        Session s = null;
        Transaction tx = null;
        try {
            s = HibernateUtil.getSession();
            tx = s.beginTransaction();
            s.save(user);
            tx.commit();
        } finally {
            if(s != null)
                s.close();
        }
    }
```

## Hibernate缺点

- 全表映射带来的不便，比如更新时需要发送所有的字段。
- 无法根据不同的条件组装不同的SQL
- 不能有效的支持存储过程
- 无法优化SQL

# MyBatis
>MyBatis的前身是Apache的一个开源项目iBatis，是一个基于Java的持久层框架。Mybaties能很好地解决Hibernate遇到的问题。




